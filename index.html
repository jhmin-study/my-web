# generate_lotto_page.py
# This Python script writes a standalone HTML file (index.html) for a Lotto number generator.
# Rationale: the canvas/textdoc was previously stored as a Python file but contained raw HTML which
# caused a SyntaxError when executed as Python. To avoid that, we store the HTML in a triple-quoted
# Python string and write it to disk. This file is safe to execute under Python and includes simple
# assertions (tests) to ensure the critical CSS lines exist and are correctly formatted.

HTML_CONTENT = '''<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ë¡œë˜ ë²ˆí˜¸ ìë™ ìƒì„±ê¸°</title>

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E%F0%9F%8E%B1%3C/text%3E%3C/svg%3E">

  <style>
    * { box-sizing: border-box; }
    body {
      font-family: "Pretendard", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      /* fallback color */
      background-color: #dfe6ff;
      /* explicit gradient on its own line to avoid accidental tokenization issues */
      background-image: linear-gradient(135deg, #f9f9fb, #dfe6ff);

      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .container {
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(8px);
      width: 94%;
      max-width: 640px;
      padding: 26px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.12);
      text-align: center;
    }

    h1 { margin: 0 0 12px 0; font-size: 26px; color: #1b2533; }

    .controls { display:flex; gap:8px; justify-content:center; align-items:center; margin-bottom:16px; flex-wrap:wrap; }
    input[type=number] { width:72px; padding:8px; border-radius:8px; border:1px solid #d7e0ff; }
    select { padding:8px; border-radius:8px; border:1px solid #d7e0ff; }

    .numbers { display:flex; gap:10px; justify-content:center; flex-wrap:wrap; padding:16px; background:#fff; border-radius:12px; box-shadow: 0 4px 12px rgba(2,6,23,0.06); }
    .ball {
      width:46px; height:46px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; font-weight:700; color:#fff; font-size:18px;
      transform-origin:center center;
      animation: pop 260ms cubic-bezier(.2,.9,.3,1);
    }
    @keyframes pop { from { transform: scale(.4); opacity:0 } to { transform: scale(1); opacity:1 } }

    /* color buckets */
    .c1 { background:#f2b138; }
    .c2 { background:#4aa3ff; }
    .c3 { background:#4caf50; }
    .c4 { background:#e57373; }
    .c5 { background:#9b59b6; }

    .actions { display:flex; gap:12px; justify-content:center; margin-top:14px; }
    button { padding:10px 16px; border-radius:10px; border:none; cursor:pointer; font-weight:600; }
    .primary { background:#4c6fff; color:#fff; }
    .muted { background:#f1f3ff; color:#21324a; border:1px solid #d7e0ff; }

    /* responsive tweaks */
    @media (max-width:420px) {
      .ball { width:40px; height:40px; font-size:16px }
      .container { padding:18px }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ± ë¡œë˜ ë²ˆí˜¸ ìë™ ìƒì„±ê¸° (í´ë¼ì´ì–¸íŠ¸ ì „ìš©)</h1>

    <div class="controls">
      <label>ì¥ìˆ˜ <input id="count" type="number" value="5" min="1" max="50" /></label>
      <label>ë°©ì‹
        <select id="mode"><option value="normal">ì¼ë°˜</option><option value="weighted">í†µê³„ ê¸°ë°˜</option></select>
      </label>
      <button id="quick" class="muted">í•œì„¸íŠ¸ ë¹ ë¥´ê²Œ</button>
    </div>

    <div id="numbers" class="numbers">ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ì„¸ìš”</div>

    <div class="actions">
      <button id="generate" class="primary">ìƒì„±</button>
      <button id="copy" class="muted">ë³µì‚¬</button>
      <button id="save" class="muted">ì €ì¥</button>
      <button id="stats" class="muted">í†µê³„ ë³´ê¸°</button>
    </div>

    <div id="savedList" style="margin-top:12px;text-align:left"></div>
    <div id="statsBox" style="margin-top:12px;text-align:left"></div>
  </div>

  <script>
    // helper: bucket color
    function colorClass(n){ if(n<=10) return 'c1'; if(n<=20) return 'c2'; if(n<=30) return 'c3'; if(n<=40) return 'c4'; return 'c5'; }

    function genNormal(){ const s=new Set(); while(s.size<6) s.add(Math.floor(Math.random()*45)+1); return [...s].sort((a,b)=>a-b); }

    function genWeighted(){ // simple weight example: favor lower numbers and odd numbers slightly
      const weights=[]; for(let n=1;n<=45;n++){ let w=1; if(n<=20) w+=1; if(n%2===1) w+=0.4; if(n%7===0) w+=0.6; weights.push({n,w}); }
      const selected=[]; while(selected.length<6){ const total=weights.reduce((a,b)=>a+b.w,0); let pick=Math.random()*total; for(let i=0;i<weights.length;i++){ if(pick<weights[i].w){ if(!selected.includes(weights[i].n)) selected.push(weights[i].n); break; } pick-=weights[i].w; } }
      return selected.sort((a,b)=>a-b);
    }

    function renderNumbers(container, arr){ container.innerHTML=''; arr.forEach(n=>{ const el=document.createElement('div'); el.className='ball '+colorClass(n); el.textContent = String(n).padStart(2,'0'); container.appendChild(el); }); }

    function saveToLocal(arr){ const key='savedLottoV1'; const cur=JSON.parse(localStorage.getItem(key)||'[]'); cur.push({nums:arr, ts:new Date().toISOString()}); localStorage.setItem(key, JSON.stringify(cur)); renderSaved(); }
    function renderSaved(){ const key='savedLottoV1'; const box=document.getElementById('savedList'); const list=JSON.parse(localStorage.getItem(key)||'[]'); if(!list.length){ box.innerHTML='<em style="color:#6b7280">ì €ì¥ëœ ë²ˆí˜¸ê°€ ì—†ìŠµë‹ˆë‹¤</em>'; return; } box.innerHTML=''; list.slice().reverse().forEach((it,idx)=>{ const row=document.createElement('div'); row.style.padding='8px 0'; row.style.borderTop='1px solid #eef2ff'; it.nums.forEach(n=>{ const b=document.createElement('span'); b.className='ball '+colorClass(n); b.style.marginRight='6px'; b.style.display='inline-block'; b.textContent=String(n).padStart(2,'0'); row.appendChild(b); }); const del=document.createElement('button'); del.textContent='ì‚­ì œ'; del.className='muted'; del.style.marginLeft='10px'; del.onclick=()=>{ const orig=JSON.parse(localStorage.getItem(key)||'[]'); orig.splice(orig.length-1-idx,1); localStorage.setItem(key, JSON.stringify(orig)); renderSaved(); }; row.appendChild(del); box.appendChild(row); }); }

    function computeStats(){ // simple frequency count from saved numbers
      const key='savedLottoV1'; const arr=JSON.parse(localStorage.getItem(key)||'[]'); const freq=Array(46).fill(0); arr.forEach(it=>it.nums.forEach(n=>freq[n]++)); const stats=[]; for(let i=1;i<=45;i++) stats.push({n:i,c:freq[i]}); stats.sort((a,b)=>b.c-a.c); return stats; }
    function renderStats(){ const box=document.getElementById('statsBox'); const stats=computeStats(); if(stats.every(s=>s.c===0)){ box.innerHTML='<em style="color:#6b7280">ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ì–´ í†µê³„ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</em>'; return; } const top=stats.slice(0,6); box.innerHTML='<strong>ê°€ì¥ ìì£¼ ë‚˜ì˜¨ ë²ˆí˜¸ (ì €ì¥ëœ ë°ì´í„° ê¸°ì¤€)</strong><div style="margin-top:8px"></div>'; top.forEach(s=>{ const sp=document.createElement('span'); sp.className='ball '+colorClass(s.n); sp.style.marginRight='6px'; sp.textContent=String(s.n).padStart(2,'0')+' ('+s.c+')'; box.appendChild(sp); }); }

    // wire up
    const numbersBox = document.getElementById('numbers'); document.getElementById('generate').addEventListener('click', ()=>{
      const count = Math.max(1, Math.min(50, parseInt(document.getElementById('count').value)||1)); const mode=document.getElementById('mode').value;
      numbersBox.innerHTML=''; for(let i=0;i<count;i++){ const nums = mode==='weighted'?genWeighted():genNormal(); const wrap=document.createElement('div'); wrap.style.margin='8px'; renderNumbers(wrap, nums); numbersBox.appendChild(wrap); }
    });

    document.getElementById('quick').addEventListener('click', ()=>{ const nums=genNormal(); numbersBox.innerHTML=''; renderNumbers(numbersBox, nums); });

    document.getElementById('copy').addEventListener('click', ()=>{
      const spans = Array.from(numbersBox.querySelectorAll('.ball')); if(!spans.length) return alert('ë¨¼ì € ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ì„¸ìš”'); const text = spans.map(s=>s.textContent).join(', ');
      if(navigator.clipboard && navigator.clipboard.writeText) navigator.clipboard.writeText(text).then(()=>alert('ë³µì‚¬ë¨: '+text)).catch(()=>prompt('ë³µì‚¬ ì‹¤íŒ¨, ì•„ë˜ì—ì„œ ë³µì‚¬í•˜ì„¸ìš”', text)); else prompt('ë³µì‚¬í•˜ì„¸ìš”', text);
    });

    document.getElementById('save').addEventListener('click', ()=>{
      const spans = Array.from(numbersBox.querySelectorAll('.ball')); if(!spans.length) return alert('ë¨¼ì € ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ì„¸ìš”'); const nums=Array.from(new Set(spans.map(s=>parseInt(s.textContent)))).sort((a,b)=>a-b); saveToLocal(nums); alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');
    });

    document.getElementById('stats').addEventListener('click', ()=>{ renderStats(); });

    // initialize
    renderSaved();
  </script>
</body>
</html>'''


def write_file(path='index.html'):
    """Write the HTML content to the given path."""
    with open(path, 'w', encoding='utf-8') as f:
        f.write(HTML_CONTENT)
    print(f'Wrote {path} (size={len(HTML_CONTENT)} bytes)')


# --- Simple tests ---
def run_tests():
    # Ensure critical CSS lines are present and correctly formatted
    assert 'background-color: #dfe6ff;' in HTML_CONTENT, 'missing or modified background-color line'
    assert 'background-image: linear-gradient(135deg, #f9f9fb, #dfe6ff);' in HTML_CONTENT, 'missing or modified background-image line'
    # Ensure basic HTML structure
    assert '<!DOCTYPE html>' in HTML_CONTENT and '<html' in HTML_CONTENT and '</html>' in HTML_CONTENT
    # Ensure JS hooks exist
    assert "id=\'generate\'" in HTML_CONTENT or 'id="generate"' in HTML_CONTENT
    print('All tests passed')


if __name__ == '__main__':
    write_file('index.html')
    run_tests()
